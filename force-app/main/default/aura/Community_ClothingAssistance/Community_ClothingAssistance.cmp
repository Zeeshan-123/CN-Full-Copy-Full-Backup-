<aura:component  implements="forceCommunity:availableForAllPageTypes" access="global" controller="Community_ClothingAssistanceController">
      <ltng:require styles="{!$Resource.CN_Boot}"/>
     <!--Allow Multi Line Space in Toast Messages-->
     <aura:html tag="style">
        .toastMessage.forceActionsText{
        white-space : pre-line !important;
        } 
    </aura:html>
    
    <aura:attribute name="showSuccessMessage" type="boolean" default="false"/>
    <aura:attribute name="showPrimaryGuardianSection" type="boolean" default="false"/>
    <aura:attribute name="showCAForm" type="boolean" default="false"/>
    <aura:attribute name="showCAEdit" type="boolean" default="false"/>
    <aura:attribute name="showEditBtn" type="boolean" default="false"/>
    <aura:attribute name="showReviewScreen" type="boolean" default="false"/>
    <aura:attribute name="showVerifyMobileScreen" type="boolean" default="false"/>
    <aura:attribute name="mobileverifiedSuccess" type="boolean" default="false"/>
    <aura:attribute name="UpdateAddressRequired" type="boolean" default="false"/>
    
    <!--Attributes for Secondary Contact-->
    <aura:attribute name="SecConFirstNameVal" type="string" default=""/>
    <aura:attribute name="SecConLastNameVal" type="string" default=""/>
    <aura:attribute name="SecConPhoneVal" type="string" default=""/>
    <aura:attribute name="SecConRelationVal" type="string" default=""/>
    
     <!--Attributes for Primary Guardian-->
    <aura:attribute name="PriGuardianFirstNameVal" type="string" default=""/>
    <aura:attribute name="PriGuardianLastNameVal" type="string" default=""/>
    <aura:attribute name="PriGuardianPhoneVal" type="string" default=""/>
    
     <!--Attributes for Primary Contact-->
    <aura:attribute name="PriConFirstNameVal" type="string" default=""/>
    <aura:attribute name="PriConMiddleNameVal" type="string" default=""/>
    <aura:attribute name="PriConLastNameVal" type="string" default=""/>
    <aura:attribute name="PriConCIVal" type="string" default=""/>
    <aura:attribute name="PriConDOBVal" type="string" default=""/>
    <aura:attribute name="PriConEmailVal" type="string" default=""/>
    <aura:attribute name="PriConPhoneVal" type="string" default=""/>
    
     <!--Attributes for Mailing Address OnLoad-->
    <aura:attribute name="mailingStreetOLV" type="string" default=""/>
    <aura:attribute name="mailingCityOLV" type="string" default=""/>
    <aura:attribute name="mailingCountryOLV" type="string" default=""/>
    <aura:attribute name="mailingStateOLV" type="string" default=""/>
    <aura:attribute name="mailingOtherStateOLV" type="string" default=""/>
    <aura:attribute name="mailingZipOLV" type="string" default=""/>
    <aura:attribute name="mailingSuitOLV" type="string" default=""/>
    <aura:attribute name="mailingAddreesL2OLV" type="string" default=""/>
    
     <!--Attributes for Mailing Address-->
    <aura:attribute name="mailingStreetVal" type="string" default=""/>
    <aura:attribute name="mailingCityVal" type="string" default=""/>
    <aura:attribute name="mailingCountryVal" type="string" default=""/>
    <aura:attribute name="mailingStateVal" type="string" default=""/>
    <aura:attribute name="mailingOtherStateVal" type="string" default=""/>
    <aura:attribute name="mailingZipVal" type="string" default=""/>
    <aura:attribute name="mailingSuitVal" type="string" default=""/>
    <aura:attribute name="mailingAddreesL2Val" type="string" default=""/>
    
     <!--Attributes for Melissa Data-->
    <aura:attribute name="location" type="string" default=""/>
    <aura:attribute name="predictions" type="List" default="[]"/>
    <aura:attribute name="states" type="List" default="[]"/>
    <aura:attribute name="isManual" type="boolean" default="false"/>
    <aura:attribute name="selectedAddressIndex" type="Integer" default="0"/>
    <aura:attribute name="isAddressChanged" type="boolean" default="false"/>
    <aura:attribute name="selectedAddress" type="string" default=""/>
    <aura:attribute name="showManualCB" type="boolean" default="false"/>
    <aura:attribute name="mobileVer" type="boolean" default="false"/>
    <aura:attribute name="mobileVerStatus" type="boolean" default="false"/>
    <aura:attribute name="showLookUp" type="boolean" default="false"/>
    
    <aura:attribute name="caseId" type="String"/>
    <aura:attribute name="requestNumber" type="String"/>
    <aura:attribute name="accid" type="String"/>
        
     <!--Attributes for Students-->
    <aura:attribute name="StudentsList" type="CA_Household_Member__c[]" /> 
    <aura:attribute name="StudentsListSendToApex" type="CA_Household_Member__c[]" /> 
    <aura:attribute name="StudentsListToReview" type="CA_Household_Member__c[]" /> 
       
    <!--Attributes for Required-->
    <aura:attribute name="mailingAddressRequired" type="boolean" default="false"/>
    <aura:attribute name="FFAddressRequired" type="boolean" default="false"/>
    
    <!--Attributes for Physical and Mailing State/Country Picklists-->
    <aura:attribute name="getMailingParentList" type="list" default="[]" description=""/>
    <aura:attribute name="getMailingChildList" type="list" default="[]"/>
    <aura:attribute name="getPickListMap" type="map"/>
    
    <!--Attributes to show hide State/Other State Fields-->
    <aura:attribute name="showMailingState" type="boolean" default="true"/>
    <aura:attribute name="showMailingOtherState" type="boolean" default="false"/>
    <aura:attribute name="getMailingDisabledChildField" type="boolean" default="true"/>
    <aura:attribute name="mailingOtherStateDisabled" type="boolean" default="true"/>
    
    <!--Attributes for Button -->
    <aura:attribute name="iAccept" type="Boolean" default="false"/>
    <aura:attribute name="malingAddressCorrect" type="Boolean" default="false"/>
    <aura:attribute name="addressUpdate" type="Boolean" default="false"/>
    <aura:attribute name="isActive" type="Boolean" default="false"/>
    <aura:attribute name="isActive2" type="Boolean" default="false"/>
    <aura:attribute name="isActiveVerify" type="Boolean" default="false"/>
    
    <!--Attributes for Student Grid Picklists-->
    <aura:attribute name="gradeList" type="String[]" />
    <aura:attribute name="category" type="String[]" />
    <aura:attribute name="relationList" type="String[]" />
    
    <!--Handler-->
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/> 
 
    <!--Cloting Assistance Form Div-->
    <aura:if isTrue="{!v.showCAForm}"> 
        <div class="main-container"> 
            <div class="card m-box ">
                
                <img src="{!$Resource.Clothing_Assistance_Logo}" alt=""/>

                <div class="row">        
                    <div class="col-sm-12" >  
                        <div class="panel-head" style="background-color: #3f7084;">  
                            <h5 class="mainHeading text-center" style="color:#fff">
                              2021 School Clothing Assistance Program
                            </h5> </div>
                        <div class="m-Border "></div>
                    </div>
                </div>
                <div class="m-box-style">
                    <br/>
                   
                    <p style="margin-top: 0px;">The Cherokee Nation continues addressing the impacts of COVID-19 and the economic hardships faced by Cherokee Nation citizens.</p>
                    <br/>
                    <p style="margin-top: 0px;">Another way the Cherokee Nation can help is by offering every Cherokee school-age child help with school clothing assistance.</p>
                    <br/>
                    <p style="margin-top: 0px;">This application is for the 2021 School Clothing Assistance Program. By completing the application you are requesting assistance due to the economic impact of COVID-19, 
                        and any financial assistance provided to you on behalf of the student(s) listed on the application will be used to help meet the student’s school clothing needs.</p>
                    <br/>
                    <p style="margin-top: 0px;">Please review the eligibility requirements listed below.</p>
                     <br/>
                    <p style="margin-top: 0px;"><b>Application Deadline:</b> August 20, 2021.</p>
                    <br/>
                    <p style="margin-top: 0px;"><b>Eligibility Requirements</b></p>
                    <br/>
                    <p style="margin-top: 0px;"><b>Citizenship:</b> Student <b>must</b> be a current Cherokee Nation citizen. </p>
                    <p style="margin-top: 0px;"><b>Income:</b> No income limit.</p>
                    <p style="margin-top: 0px;"><b>Age:</b> Student should be between 5-18 years old during the application period.</p>
                    <br/>
                    <p style="margin-top: 0px;"> <b>OR</b> </p>
                     <br/>
                    <p style="margin-top: 0px;"><b>Citizenship:</b> Student must be enrolled in Kindergarten-12th grade or equivalent school program; post-secondary education students are not eligible.</p>
                    <br/>
                    <p style="margin-top: 0px;">Students can be in public, private, virtual, or home school programs.</p>
                    <br/>
                    <p style="margin-top: 0px;">There are NO residency requirements; all Cherokee citizens, regardless of residency are eligible.</p>
                    <br/>
                    <p style="margin-top: 0px;">Please be aware that applications containing duplicate information, such as student’s name, will be flagged for further review. Processing for these applications will be delayed. 
                        You may be contacted after the deadline for additional documentation to clarify any conflicting or duplicate information. </p>
                    <br/>
                    <p style="margin-top: 0px;">If you have any questions regarding eligibility or submission, 
                        please call 918-453-5058 to be directed to Cherokee Nation staff assisting with questions.</p>
                    <br/>
                    <p style="margin-top: 0px;">Please review your information prior to submission to ensure timely processing and payment. 
                        Payments may be made electronically or by paper check after the application has been verified and once the application deadline of August 20th, 2021 has passed.  
                        Any inconsistent or missing data may delay processing, and further action by Cherokee Nation staff may take additional time before processing and payment is complete.</p>
                     <br/>
                  <i>   <p>Applicant’s Cherokee Nation Citizenship #, name, and date of birth MUST match Cherokee Nation Registration records. 
                      Applications with inconsistent, incorrect, or missing data cannot be approved.</p> </i>
                  <!--Parent / Legal Guardian-->
                    <div class="panel-head2" >  <h5 class="mainHeading text-center">Primary Contact / Guardian</h5> </div>
                    <h1 class="head">Primary Contact:</h1>  
                    <div class="row ">
                        <div class=" col-sm-4"> 
                            <lightning:input label="First Name" 
                                             aura:id="priConFirstName"
                                             class="alignField" 
                                             type="text"
                                             disabled="true"/>       
                        </div>
                        
                        <div class=" col-sm-4"> 
                            <lightning:input label="Middle Name"
                                             aura:id="priConMiddleName"
                                             class="alignField"
                                             type="text"
                                             disabled="true"/>       
                        </div>
                        
                        <div class=" col-sm-4"> 
                            <lightning:input label="Last Name"
                                             aura:id="priConLastName"
                                             class="alignField "
                                             type="text"
                                             disabled="true"/>       
                        </div>
                        
                    </div>
                    <div class="row ">
                        
                        <div class=" col-sm-4">
                            <lightning:input label="Cherokee Nation Citizen Registry ID #"
                                             aura:id="RegID"
                                             class="alignField "
                                             type="text"
                                             disabled="true"/>
                        </div>
                        <div class=" col-sm-4"> 
                            <lightning:input class="alignField"
                                             label="Date of Birth"
                                             aura:id="priConDob"
                                             disabled="true"
                                             placeholder="MM/DD/YYYY"/>               
                        </div> 
                        <div class=" col-sm-4"> 
                            <lightning:input aura:id="priConEmail" 
                                             label="Email" 
                                             type="email"
                                             class=" alignField" 
                                             disabled="true"/>      
                        </div>
                        
                    </div>
                    
                    <!--Mobile onchange="{!c.FormatPhone}"--> 
                    <div class="row ">
                        <div class=" col-sm-4"> 
                            <span id="priConCellPhone" onkeypress="{!c.NumberCheck}" onkeyup="{!c.NumberCheck}">
                                <lightning:input label="Mobile"
                                                 aura:id="priConCellPhone"
                                                 value="{!v.PriConPhoneVal}"
                                                 class="alignField"
                                                 required="true"
                                                 onblur="{!c.clearErrors}"
                                                 maxlength="13"
                                                 oncontextmenu="{!c.handleContext}" 
                                                 onpaste="{!c.handlePaste}"
                                                 ondrop="{!c.handleContext}"
                                                 disabled="{!v.mobileverifiedSuccess}"
                                                 />
                            </span>
                        </div>
                        <!--
                        <aura:if isTrue="{!not(v.mobileverifiedSuccess)}">
                            <div class=" col-sm-4" style="margin-top:10px"> 
                                <lightning:button label="Verify" disabled="{!v.isActive2}" class="btn mBtn " variant="brand" onclick="{!c.verify}"/>   
                            </div>
                        </aura:if>

                        <aura:if isTrue="{!(v.mobileverifiedSuccess)}">
                            <div class=" col-sm-4" style="margin-top:10px"> 
                                <lightning:button label="Verified" disabled="true" class="btn mBtn " variant="brand"/>   
                            </div>
                        </aura:if>
-->
                    </div>

                    <!--/Mobile-->
                    
                    <!--Verify Mobile-->
                    <aura:if isTrue="{!v.showVerifyMobileScreen}">
                        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open acct-header--tier-modal slds-align_absolute-center">
                            <div class="slds-modal__container">
                                <!--Modal Header-->
                                <header class="slds-modal__header">
                                    <lightning:buttonIcon iconName="utility:close"
                                                          size="large"
                                                          variant="bare-inverse"
                                                          onclick="{! c.hideModal }"
                                                          alternativeText="Close" 
                                                          class="slds-modal__close" />
                                    <h2 id="modal-heading-01" class="mH"></h2>
                                </header>  <!--/Modal Header-->
                                
                                <!--Modal Body-->
                                <div class="slds-modal__content slds-p-around_small modal__padding" id="modal-content-id-1">
                                    <div class="row justify-content-center">
                                        <div class="card otp-b">
                                            <div class="card-body ">
                                                <p> Enter Your Verification Code</p>
                                                <p>A verification code was sent via SMS. Please enter the code below.</p>
                                                <span onkeypress="{!c.NumberCheck}">
                                                    <lightning:input type="text" 
                                                                     label="Verification Code" 
                                                                     class="alignField inputField"
                                                                     aura:id='Input_OTP' 
                                                                     required="true"
                                                                     onblur="{!c.clearErrors}"
                                                                     messageWhenValueMissing="PIN required."/>
                                                </span>
                                                <p style="margin-top: 20px; margin-bottom: -25px;">This window needs to remain open until the verification code is entered.</p>
                                                <br/>
                                                <div class="text-center">
                                                    <lightning:button label="Next" disabled="{!v.isActiveVerify}" onclick="{!c.validateOTP}" class="btn mBtn " variant="brand"  />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> <!--/Modal Body-->
                            </div>
                        </section>
                        
                        <div class="slds-backdrop slds-backdrop_open"></div>
                        
                    </aura:if>
                    <!--verify Mobile end-->
             
                    
                    <!--Mailing Address-->    
                    <h1 class="head" style="margin-bottom: -1%;">Mailing Address (If your mailing address is not correct, please use the address lookup tool to update it):</h1>  
                    <div class="row">     
                          <div class="col-sm-12 " >  
                            <strong>
                                     <lightning:input type="checkbox"  required="true"
                                                     style = 'margin-top: 22px;'
                                                     label="I have verified that my address is correct"
                                                     class="alignField"
                                                     aura:id="mAddressCheckBox" checked="{!v.malingAddressCorrect}" />
                                    </strong>
                            </div>
                        <div class="col-sm-6 " >  
                            <lightning:input aura:id="MailingStreetInput" 
                                             class="alignField" 
                                             label="Address Line1: " 
                                             disabled="{!not(v.isManual)}"
                                             required="{!v.mailingAddressRequired}"
                                             onblur="{!c.clearErrors}"/>
                            
                        </div>
                        <div class="col-sm-6 " >  
                            <lightning:input aura:id="MailingAddress2Input" 
                                             class="alignField" 
                                             label="Address Line2: " 
                                             disabled="{!not(v.isManual)}"
                                             onblur="{!c.clearErrors}"/>
                            
                        </div>
                        <div class="col-sm-6 " >  
                            <lightning:input aura:id="MailingSuiteInput" 
                                             class="alignField" 
                                             label="Suite: " 
                                             disabled="{!not(v.isManual)}"
                                             onblur="{!c.clearErrors}"/>
                            
                        </div>
                        <div class="col-sm-6 " >  
                            <lightning:input aura:id="MailingCityInput" 
                                             class="alignField "
                                             label="City: " 
                                             disabled="{!not(v.isManual)}"
                                             required="{!v.mailingAddressRequired}"
                                             onblur="{!c.clearErrors}"/>
                        </div>
                        
                        <div class="col-sm-6" >
                            <lightning:select class="alignField "
                                              name="MailingCountryInput"
                                              aura:id="MailingCountryInput"
                                              label="Country"
                                              disabled="{!not(v.isManual)}"
                                              required="{!v.mailingAddressRequired}"
                                              onblur="{!c.clearErrors}"
                                              onchange="{!c.ObjFieldByMailingParent}">
                                
                                 <option value="">--None--</option>
                                <aura:iteration items="{!v.getMailingParentList}" var="value">
                                    <option value="{!value}">{!value}</option>
                                </aura:iteration>
                                
                            </lightning:select>    
                        </div>  
                       
                         <aura:if isTrue="{!v.showMailingState}">
                        <div class="col-sm-6" > 
                            <lightning:select class="alignField "
                                              aura:id="MailingStateInput"
                                              name="childField"
                                              label="State"
                                              disabled="{!not(v.isManual)}"
                                              required="{!v.mailingAddressRequired}"
                                              onblur="{!c.clearErrors}">
                                
                                <option value="">--None--</option>
                                <aura:iteration items="{!v.getMailingChildList}" var="value">
                                    <option value="{!value}">{!value}</option>
                                </aura:iteration>
                                
                            </lightning:select>    
                        </div>
                        </aura:if>
                        
                        <aura:if isTrue="{!v.showMailingOtherState}">
                            <div class="col-sm-6 " >  
                                <lightning:input	aura:id="MailingOtherState" 
                                                    class="alignField inputField"
                                                    label="Other State/Territory:" 
                                             		disabled="{!not(v.isManual)}"
                                                    required="{!v.mailingAddressRequired}"
                                                    onblur="{!c.clearErrors}"/>
                     		</div>
                        </aura:if>
                        
                         <div class="col-sm-6" >               
                            <lightning:input aura:id="MailingzipInput" 
                                             class="alignField "
                                             label="Zip Code: "  
                                             disabled="{!not(v.isManual)}"
                                             required="{!v.mailingAddressRequired}"
                                             onblur="{!c.clearErrors}"/>
                        </div>
                        
                        <div class="col-sm-6" > 
                          
                          <Strong>
                            <label class="slds-form-element__label" style = 'margin-top: 8px;' for="toggle">Update Address</label>
                            </Strong>  
                            <lightning:input class="cell"
                                             type="toggle" 
                                             aura:id="addressUpdateCheckBox" 
                                             checked="{!v.addressUpdate}"
                                             onchange="{!c.handleAddreesUpdate}"
                                             messageToggleActive="Yes"
                                             messageToggleInactive="No"
                                             required="{!v.UpdateAddressRequired}"/>
                        </div>
                        
                         <aura:if isTrue="{!v.showLookUp}">
                           <div class="col-sm-6">
                            <lightning:input aura:id="AddressFreeFormInput" 
                                             class="alignField" 
                                             label="Address Lookup: "  
                        					 value="{!v.location}"
                                             onchange="{!c.handleAddressChange}"
                                             required="{!v.FFAddressRequired}"/>
                            <aura:if isTrue="{!v.predictions.length > 0}">		 
                            <ul class="result" id="addressResult">
                                <aura:iteration items="{!v.predictions}" var="prediction" indexVar="indexVar">
                                        <aura:if isTrue="{!prediction.Address.SuiteCount > 0}">
                                        <aura:iteration items="{!prediction.Address.SuiteList}" var="suite" indexVar="indexVar2">
                                            <li class="slds-listbox__item">
                                                <a onclick="{!c.handleAddressClick}" data-placeid="{!indexVar+indexVar2}" data-place="{!prediction.Address.AddressLine1 +' '+suite+', '+ prediction.Address.City+', '+prediction.Address.State}">{!prediction.Address.AddressLine1 +' '+suite+', '+ prediction.Address.City+', '+prediction.Address.State}</a>
                                            </li>
                                        </aura:iteration>
                                        <aura:set attribute="else">
                                            <li class="slds-listbox__item">
                                                <a onclick="{!c.handleAddressClick}" data-placeid="{!indexVar}" data-place="{!prediction.Address.AddressLine1 + (prediction.Address.SuiteName != ''?' '+prediction.Address.SuiteName:'') +', '+ prediction.Address.City+', '+prediction.Address.State}">
                                                {!prediction.Address.AddressLine1} <aura:if isTrue="{!prediction.Address.SuiteName != ''}">{!' '+prediction.Address.SuiteName}</aura:if> {!', '+ prediction.Address.City+', '+prediction.Address.State}</a>
                                            </li>
                                        </aura:set>
                                    </aura:if> 
                                </aura:iteration>
                            </ul> 	 
                        </aura:if>
                        </div>
                        <div class="col-sm-6">
                            <div class="slds-form slds-form_stacked">
                                <div class="slds-form-element">
                                    <aura:if isTrue="{!v.showManualCB == true}">
                                    <label class="slds-form-element__label" for="toggle">Enter address manually</label>
                                    <lightning:input class="cell" type="toggle" 
                                                     aura:id="checkManual" 
                                                     checked="{!v.isManual}"
                                                     onchange="{!c.handleToggleChange}"
                                                     messageToggleActive="Yes"
                                                     messageToggleInactive="No"/>
                                    </aura:if>
                                </div>
                            </div>
                        </div>
                        </aura:if>
                    </div>
                    <!--/Mailing Address-->    
                     
                   <div class="panel-head2">  <h5 class="mainHeading text-center">Students Information</h5> </div>

                    <!--table-->
                    <div id="tbl">
                        <div class="slds-float_left slds-p-bottom_small">
                            <lightning:button label="Add Row/Student" class="btn a-btn" variant="brand" onclick="{!c.addRow}"/>
                        </div>
                        <div class="table-responsive-sm" aura:id="parent-aura-div-id">            
                            <table class="table table-bordered">
                                <thead class="thead-dark">
                                    <tr>
                                        <th scope="col">Citizen Id</th>
                                        <th scope="col">Date of Birth</th>
                                        <th scope="col">Grade</th>
                                        <th scope="col">School Category</th>
                                        <th scope="col">Delete</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <aura:iteration items="{!v.StudentsList}" var="st" indexVar="index">
                                        <tr scope="row">
                                            <td>
                                                  <lightning:input  name="citizenId"
                                                                 	type="text"  
                                                                 	value="{!st.Citizen_ID__c}" 
                                                                 	maxlength="15"
                                                                	required="true"/>
                                            </td>
                                            
                                            <td> 
                                               <lightning:input  value="{!st.Date_of_Birth__c}"
                                                                 maxlength="10" 
                                                                 onchange="{!c.validateAndReplace}"
                                                                 required="true"
                                                                 placeholder="MM/DD/YYYY"
                                                                 oncontextmenu="{!c.handleContext}" 
                       					    					 onpaste="{!c.handlePaste}"/>  
                                            </td>
                                                                   
                                            <td>
                                                <lightning:select aura:id="grade"
                                                                  value="{!st.Grade__c}"
                                                                  required="true"> 
                                               <option value="">--None--</option>
                                                    <aura:iteration items="{!v.gradeList}" var="grl" indexVar="key">   
                                                        <option text="{!grl.value}" value="{!grl.key}"/>
                                                    </aura:iteration>
                                                </lightning:select> 
               						  </td>
                                            <td>
                                                
                                                 <lightning:select aura:id="sector"
                                                                   value="{!st.Sector__c}"
                                                                   required="true"> 
                                               <option value="">--None--</option>
                                                    <aura:iteration items="{!v.category}" var="cat" indexVar="key">   
                                                        <option text="{!cat.value}" value="{!cat.key}"/>
                                                    </aura:iteration>
                                                </lightning:select> 
                                            </td> 
                                          
                                            <td style="text-align: center !important; ">
                                                <a onclick="{!c.removeRow}" data-record="{!index}">
                                                    <lightning:icon iconName="utility:delete" size="small" alternativeText="Delete"/>
                                                    <span class="slds-assistive-text">Delete</span>
                                                </a>
                                            </td>  
                                        </tr>
                                        
                                    </aura:iteration>     
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!--/table-->
                    
                    <!--cards-->
                    <div id="crds">
                        <div class="table-responsive-sm requestsTable clsSmallScreen" style="margin-top:15px;">            
                            <table class="table table-bordered">
                                <tbody>
                                    <aura:iteration items="{!v.StudentsList}" var="st" indexVar="index">
                                        <tr>
                                            <td class="clsSmallScreentatus" style="text-align:right;">
                                                 <a onclick="{!c.removeRow}" data-record="{!index}">
                                                    <lightning:icon iconName="utility:delete" size="small" alternativeText="Delete"/>
                                                    <span class="slds-assistive-text">Delete</span>
                                                </a>
                                            </td>
                                            
                                             <td data-th="Citizen Id" class="clsSmallScreentatus">
                                                  
                                                  <lightning:input  name="citizenId"
                                                                 	type="text"  
                                                                 	value="{!st.Citizen_ID__c}" 
                                                                 	maxlength="15"
                                                                	required="true"/>
                                            </td>
                                            
                                            <td data-th="Date of Birth" class="clsSmallScreentatus">
                                                
                                                <lightning:input value="{!st.Date_of_Birth__c}"
                                                                 maxlength="10" 
                                                                 onchange="{!c.validateAndReplace}"
                                                                 required="true"
                                                                 placeholder="MM/DD/YYYY"
                                                                 oncontextmenu="{!c.handleContext}" 
                       					    					 onpaste="{!c.handlePaste}"/>   
                                            </td>
                                            
                                            <td data-th="Grade" class="clsSmallScreentatus">
                                                 <lightning:select aura:id="grade"
                                                                  value="{!st.Grade__c}"
                                                                  required="true"> 
                                               <option value="">--None--</option>
                                                    <aura:iteration items="{!v.gradeList}" var="grl" indexVar="key">   
                                                        <option text="{!grl.value}" value="{!grl.key}"/>
                                                    </aura:iteration>
                                                </lightning:select> 
                                            </td>
                                            
                                             <td data-th="School Category" class="clsSmallScreentatus">
                                                  <lightning:select aura:id="sector"
                                                                   value="{!st.Sector__c}"
                                                                   required="true"> 
                                               <option value="">--None--</option>
                                                    <aura:iteration items="{!v.category}" var="cat" indexVar="key">   
                                                        <option text="{!cat.value}" value="{!cat.key}"/>
                                                    </aura:iteration>
                                                </lightning:select> 
                                            </td>
                                            
                                        </tr>
                                    </aura:iteration>     
                                </tbody>
                            </table>
                        </div>
                        <div class="row ">
                            <div class=" col-sm-12"> 
                                <div class="slds-float_left">
                                    <lightning:button label="Add Row/Student" class="btn a-btn" variant="brand" onclick="{!c.addRow}"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--/cards-->         
                    
                    <!--Show Primary Guardian Section -->
                    
                    <aura:if isTrue="{!v.showPrimaryGuardianSection}">     
                        <div class="panel-head2">  <h5 class="mainHeading text-center">Primary Guardian</h5> </div>
                        <h1 class="head">Primary Guardian Contact:</h1>  
                        <div class="row ">
                            <div class=" col-sm-4"> 
                                <span onkeypress="{!c.characterCheck}">
                                    <lightning:input label="First Name" 
                                                     aura:id="PriGuardianFirstName"
                                                     value="{!v.PriGuardianFirstNameVal}"
                                                     class="alignField" 
                                                     type="text"
                                                     maxlength="30"
                                                     required="true"/>    
                                </span>
                            </div>
                            
                            <div class=" col-sm-4"> 
                                <span onkeypress="{!c.characterCheck}">
                                <lightning:input label="Last Name"
                                                 aura:id="PriGuardianLastName"
                                                 value="{!v.PriGuardianLastNameVal}"
                                                 class="alignField "
                                                 type="text"
                                                 maxlength="40"
                                                 required="true"
                                                 /> 
                                </span>
                            </div>
                            
                            <div class=" col-sm-4">
                               <span id="PriGuardianPhone" onkeypress="{!c.NumberCheck}" onkeyup="{!c.NumberCheck}">
                                    <lightning:input label="Mobile"
                                                     aura:id="PriGuardianPhone"
                                                     value="{!v.PriGuardianPhoneVal}"
                                                     class="alignField"
                                                     onblur="{!c.clearErrors}"
                                                     maxlength="13"
                                                     oncontextmenu="{!c.handleContext}" 
                                                     onpaste="{!c.handlePaste}"
                                                     ondrop="{!c.handleContext}"
                                                     required="true"
                                                     />   
                                </span>
                            </div>
                          
                            
                        </div>
                        
                        
                    </aura:if> 
                    <!--/Show Primary Guardian Section-->                    
                    
				  <div class="panel-head2">  <h5 class="mainHeading text-center">Alternate Contact / Guardian</h5> </div>
				                <h1 class="head">Alternate Contact:</h1>  
                    <div class="row ">
                        <div class=" col-sm-6">
                            <span onkeypress="{!c.characterCheck}">
                                <lightning:input label="First Name" 
                                                 aura:id="SecConFirstName"
                                                 value="{!v.SecConFirstNameVal}"
                                                 class="alignField" 
                                                 type="text"
                                                 maxlength="30" />  
                            </span>
                        </div>
                        
                        <div class=" col-sm-6"> 
                            <span onkeypress="{!c.characterCheck}">
                                <lightning:input label="Last Name"
                                                 aura:id="SecConLastName"
                                                 value="{!v.SecConLastNameVal}"
                                                 class="alignField "
                                                 type="text"
                                                 maxlength="40"
                                                 /> 
                            </span>
                        </div>
                       
                        <div class=" col-sm-6">
                             <span id="SecConPhone" onkeypress="{!c.NumberCheck}" onkeyup="{!c.NumberCheck}">
                                <lightning:input label="Mobile"
                                                 aura:id="SecConPhone"
                                                 value="{!v.SecConPhoneVal}"
                                                 class="alignField"
                                                 onblur="{!c.clearErrors}"
                                                 maxlength="13"
                                                 oncontextmenu="{!c.handleContext}" 
                                                 onpaste="{!c.handlePaste}"
                                                 ondrop="{!c.handleContext}"
                                                 /> 
                            </span>
                        </div>
                        <div class=" col-sm-6">
                            <lightning:select aura:id="SecConRelation"
                                              value="{!v.SecConRelationVal}"
                                              label="Relation"
                                              onblur="{!c.clearErrors}"> 
                                <option value="">--None--</option>
                                <aura:iteration items="{!v.relationList}" var="rel" indexVar="key">   
                                    <option text="{!rel.value}" value="{!rel.key}"/>
                                </aura:iteration>
                            </lightning:select> 
                        </div>
                   
                    </div>
                    
                    <div class="panel-head2">  <h5 class="mainHeading text-center">Terms and Conditions</h5> </div>
                    <p ></p>
                    <div class="row ">        
                        <div class="col-sm-12" > 
                            <p class="alignField" style="text-align:justify;margin-bottom:0px; color:rgb(90,90,90);">
                             Cherokee Nation is providing clothing assistance funds as part of the 2021 School Clothing Assistance Program.  All funds are to be used to help meet the clothing needs of Cherokee students economically impacted by COVID-19.  
                                Funds will be disbursed to the citizen submitted in each application.  Applications with inconsistent or missing data cannot be approved.  
                                Multiple applications submitted for the same student will be flagged for further review and may require the submission of additional documentation to determine validity of the submission before payment will be processed.
                            </p>
                            
                            <p class="alignField" style="text-align:justify;margin-bottom:0px; margin-top:10px; color:rgb(90,90,90);">
                              I accept the Terms and Conditions and agree to use the 2021 School Clothing Assistance funds to meet the clothing needs of the Cherokee student(s) listed on this application.  The information I provided is true and correct to the best of my knowledge.
                            </p>
                            
                              <p class="alignField" style="text-align:justify;margin-bottom:0px; margin-top:10px; color:rgb(90,90,90);">
                             I certify under the laws of the Cherokee Nation, United States, or a state that I am the legal primary or joint custodial parent or guardian of any minor child/children listed on my 2021 School Clothing Assistance Program application and that I have the authority to apply on the minor’s behalf.
                            </p>
                            
                            <lightning:input type="checkbox"
                                             required="true"
                                             style = 'margin-top: 22px;'
                                             label="I Accept"
                                             class="alignField"
                                             aura:id="acceptCheckBox"
                                             checked="{!v.iAccept}" />
                        </div>
                        
                    </div>  
                    <!--/Parent / Legal Guardian-->
                    
                    <div class=" text-center">
                        <lightning:button label="Review Application" disabled="{!v.isActive}" class="btn sr-button " variant="brand" onclick="{!c.ShowInfoToReview}"/>
                        <div class="slds-is-relative"> 
                            <lightning:spinner aura:id="saveSpinner" alternativeText="Processing.." title="Processing.." variant="brand" size="large" class="slds-hide"/>     
                           </div>  
                        
                    </div> 
                </div>
            </div>
        </div>
        
    </aura:if> 
    <!--Clothing Assistance Form Div-->
    
    <!--Success Message Div-->
    <aura:if isTrue="{!v.showSuccessMessage}">  
        <div class=" container" style= 'padding-right:0px !important; padding-left:0px !important;'>
            <div class="row justify-content-center">
                <div class="col-sm-10 col-md-8 col-lg-6" >
                    <div class="card sm-box">
                        <div class="align-s-content"> 
                            <strong>  <p class="msgTextFont m2" style="font-size: 20px; color: #7684e4;">
                                Congratulations!
                                
                                </p> </strong> 
                            <p class="msgTextFont " style="text-align: left; padding-bottom: 10px;"> 
                                You have successfully submitted your Clothing Assistance Application.
                                
                            </p>
                            <p class="msgTextFont " style="text-align: left; FONT-WEIGHT: 700; padding-bottom: 10px;">   
                                Confirmation Number: {!v.requestNumber}
                                
                            </p>
                            <p class="msgTextFont " style="text-align: left; padding-bottom: 10px;">
                                Please keep your confirmation number for future reference. 
                            </p>
                            
                             <div class=" text-center btn-div-r" >
                                <lightning:button class="btn s-button" label="View Request" onclick="{!c.viewRequest}" />
                                <aura:if isTrue="{!v.showEditBtn}">  
                                    <lightning:button class="btn s-button" label="Edit Request" onclick="{!c.editRequestModal}" />
                                </aura:if>
                            </div> 
                            
                            <p class="msgTextFont " style="text-align: left; padding-bottom: 10px;">
                                If you have any questions or concerns regarding your Clothing Assistance application, please review your review your request and status by clicking "View Request" above. 
                                If you have additional questions, you may also contact Cherokee Nation at 918-453-5058 or by email support-gadugiportal@cherokee.org.

                            </p>
                            
                            <p class="msgTextFont " style="text-align: left; padding-bottom: 10px;">
                                Payment processing will not begin until after the application deadline of August 20th, 2021.
                            </p>
                            
                             <p class="msgTextFont " style="text-align: left; padding-bottom: 10px;">
                            	Payment processing will be completed after all information is verified in the application. 
                                 Payments may be made electronically or by paper check. Any inconsistent or missing data may delay processing, 
                                 and further action by Cherokee Nation staff may take additional time before processing and payment is complete.
                           
                            </p>
                            
                        </div>
                    </div>    
                    
                </div>
            </div>
        </div> 
    </aura:if>
    <!--/Success Message Div-->
       
    <!--Review Section-->
   <aura:if isTrue="{!v.showReviewScreen}">
      <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open acct-header--tier-modal slds-align_absolute-center">
      <div class="slds-modal__container">
      <!--Modal Header-->
          <header class="slds-modal__header">
              <lightning:buttonIcon iconName="utility:close"
                                    size="large"
                                    variant="bare-inverse"
                                    onclick="{! c.hideModal }"
                                    alternativeText="Close" 
                                    class="slds-modal__close" />
              <h2 id="modal-heading-01" class="mH">Review Information</h2>
          </header>  <!--/Modal Header-->
                    
                    <!--Modal Body-->
        <div class="slds-modal__content slds-p-around_small modal__padding" id="modal-content-id-1">
                
        <form class="slds-form--stacked" >               

            
             <div class="panel-head2" >  <h5 class="mainHeading text-center">Primary Contact / Guardian</h5> </div>
                    <div class="row ">
                        <div class=" col-sm-4 "> 
                            <lightning:input label="First Name" 
                                             value="{!v.PriConFirstNameVal}"
                                             class="alignField modal__FontSize" 
                                             type="text"
                                             disabled="true"/>       
                        </div>
                        
                        <div class=" col-sm-4"> 
                            <lightning:input label="Middle Name"
                                             value="{!v.PriConMiddleNameVal}"
                                             class="alignField modal__FontSize"
                                             type="text"
                                             disabled="true"/>       
                        </div>
                        
                        <div class=" col-sm-4"> 
                            <lightning:input label="Last Name"
                                             value="{!v.PriConLastNameVal}"
                                             class="alignField modal__FontSize"
                                             type="text"
                                             disabled="true"/>       
                        </div>
                        
                        <div class=" col-sm-4">
                            <lightning:input label="Cherokee Nation Citizen Registry ID #"
                                             value="{!v.PriConCIVal}"
                                             class="alignField modal__FontSize"
                                             type="text"
                                             disabled="true"/>
                        </div>
                        <div class=" col-sm-4"> 
                            <lightning:input class="alignField modal__FontSize"
                                             label="Date of Birth"
                                             value="{!v.PriConDOBVal}"
                                             disabled="true"/>               
                        </div> 
                        <div class=" col-sm-4"> 
                            <lightning:input label="Email" 
                                             type="email"
                                             value="{!v.PriConEmailVal}"
                                             class=" alignField modal__FontSize" 
                                             disabled="true"/>      
                        </div>
                        
                    
                        <div class=" col-sm-4"> 
                                <lightning:input label="Mobile"
                                                 value="{!v.PriConPhoneVal}"
                                                 class="alignField modal__FontSize"
                                                 disabled="true"
                                                 />
            </div>
            </div>
            <!--Mailing Address-->
                <div class="panel-head2">  <h5 class="mainHeading text-center">Mailing Address</h5> </div>
                        <div class="row ">
                            <div class=" col-sm-4"> 
                                <lightning:input label="Address Line1" 
                                                 value="{!v.mailingStreetVal}"
                                                 class="alignField modal__FontSize" 
                                                 disabled = "true"/>       
                            </div>
                            
                            <div class=" col-sm-4"> 
                                <lightning:input label="Address Line2"
                                                 value="{!v.mailingAddreesL2Val}"
                                                 class="alignField modal__FontSize"
                                                 disabled = "true"/>   
                            </div>
                            
                            <div class=" col-sm-4">
                                    <lightning:input label="Suite"
                                                     value="{!v.mailingSuitVal}"
                                                     class="alignField modal__FontSize"
                                                     disabled = "true"/>   
                            </div>
                            
                            <div class=" col-sm-4">
                                <lightning:input label="City"
                                                 value="{!v.mailingCityVal}"
                                                 class="alignField modal__FontSize"
                                                 disabled = "true"/>   
                            </div>
                            
                            <div class=" col-sm-4">
                                <lightning:input label="Country"
                                                 value="{!v.mailingCountryVal}"
                                                 class="alignField modal__FontSize"
                                                 disabled = "true"/>   
                            </div>
                            
                            <aura:if isTrue="{!v.showMailingState}">
                                <div class=" col-sm-4">
                                    <lightning:input label="State"
                                                     value="{!v.mailingStateVal}"
                                                     class="alignField modal__FontSize"
                                                     disabled = "true"/>   
                                </div>
                            </aura:if>
                            
                            <aura:if isTrue="{!v.showMailingOtherState}">
                                <div class=" col-sm-4">
                                    <lightning:input label="Other State"
                                                     value="{!v.mailingOtherStateVal}"
                                                     class="alignField modal__FontSize"
                                                     disabled = "true"/>   
                                </div>
                            </aura:if>
                            <div class=" col-sm-4">
                                <lightning:input label="Zip Code"
                                                 value="{!v.mailingZipVal}"
                                                 class="alignField modal__FontSize"
                                                 disabled = "true"/>   
                            </div>
                            
            </div>
            <!--/Mailing Address-->
            
      <!--Students Review Table-->     
             <div class="panel-head2">  <h5 class="mainHeading text-center">Students</h5> </div>
              <div class="table-responsive-sm">            
                            <table class="table table-bordered">
                                <thead class="thead-dark">
                                    <tr>
                                        <th scope="col" class="mTableH" >First Name</th>
                                        <th scope="col" class="mTableH" >Last Name</th>  
                                        <th scope="col" class="mTableH" >Citizen ID</th>
                                        <th scope="col" class="mTableH" >Date of Birth</th>
                                        <th scope="col" class="mTableH" >Grade</th>
                                        <th scope="col" class="mTableH" >School Category</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <aura:iteration items="{!v.StudentsListToReview}" var="studnt" indexVar="index">
                                        <tr scope="row">
                                            <td class="mTable">
                                                {!studnt.First_Name__c}
                                            </td>
                                            
                                            <td class="mTable">
                                                {!studnt.Last_Name__c}
                                            </td>
                                            
                                            <td class="mTable">
                                                {!studnt.Citizen_ID__c}
                                            </td>
                                            
                                            <td class="mTable"> 
                                                {!studnt.Date_of_Birth__c}
                                            </td>
                                            
                                             <td class="mTable"> 
                                                {!studnt.Grade__c}
                                            </td>
                                            
                                             <td class="mTable"> 
                                                {!studnt.Sector__c}
                                            </td>
                                                
                                        </tr>
                                        
                                    </aura:iteration>     
                                </tbody>
                            </table>
                        </div> 
            <!--/Students Review Table-->
            
          <!--Show Primary Guardian Section -->
            <aura:if isTrue="{!v.showPrimaryGuardianSection}">     
                        <div class="panel-head2">  <h5 class="mainHeading text-center">Primary Guardian</h5> </div>
                        <div class="row ">
                            <div class=" col-sm-4"> 
                                <lightning:input label="First Name" 
                                                 value="{!v.PriGuardianFirstNameVal}"
                                                 class="alignField modal__FontSize" 
                                                 disabled = "true"/>       
                            </div>
                            
                            <div class=" col-sm-4"> 
                                <lightning:input label="Last Name"
                                                 value="{!v.PriGuardianLastNameVal}"
                                                 class="alignField modal__FontSize"
                                                 disabled = "true"/>   
                            </div>
                            
                            <div class=" col-sm-4">
                                    <lightning:input label="Mobile"
                                                     value="{!v.PriGuardianPhoneVal}"
                                                     class="alignField modal__FontSize"
                                                     disabled = "true"/>   
                            </div>
                          
                            
                        </div>
                        
                        
                    </aura:if> 
                    <!--/Show Primary Guardian Section-->   
            
            <div class="panel-head2">  <h5 class="mainHeading text-center">Alternate Contact / Guardian</h5> </div>
            <div class="row ">
                <div class=" col-sm-3"> 
                    <lightning:input label="First Name" 
                                     value="{!v.SecConFirstNameVal}"
                                     class="alignField modal__FontSize" 
                                     type="text"
                                     disabled = "true" />       
                </div>
                
                <div class=" col-sm-3"> 
                    <lightning:input label="Last Name"
                                     value="{!v.SecConLastNameVal}"
                                     class="alignField modal__FontSize"
                                     type="text"
                                     disabled = "true"
                                     />   
                </div>
                
                <div class=" col-sm-3">
                        <lightning:input label="Mobile"
                                         value="{!v.SecConPhoneVal}"
                                         class="alignField modal__FontSize"
                                         disabled = "true"
                                         />   
                </div>
                <div class=" col-sm-3">
                    <lightning:input label="Relation"
                                     value="{!v.SecConRelationVal}"
                                     class="alignField modal__FontSize"
                                     disabled = "true"
                                     />  
                </div>
                
            </div>
            
            
      			 <div class=" text-center">
           			  <lightning:button label="Edit" class="btn mBtn " variant="brand" onclick="{!c.hideModal}"/>     
            		  <lightning:button label="Submit" disabled="{!v.isActive2}" class="btn mBtn " variant="brand" onclick="{!c.save}"/>
            </div> 
                     <lightning:spinner aura:id="Spinner2" alternativeText="Processing.." title="Processing.." variant="brand" size="large" class="slds-hide"/>     
        </form>
                        
		                     
                    </div> <!--/Modal Body-->
                    
                            </div>
            </section>
    
   <div class="slds-backdrop slds-backdrop_open"></div>

            </aura:if> 
    <!--/Review Section-->
    
    <!--Show CA Edit Component-->
    <aura:if isTrue="{!v.showCAEdit}"  >
        <c:Community_CAEdit caseId="{!v.caseId}"/>
    </aura:if>
</aura:component>